{"version":3,"file":"utils.js","sources":["../../src/-private/utils.js"],"sourcesContent":["import { later, cancel } from '@ember/runloop';\nimport { EMBER_ENVIRONMENT } from './ember-environment';\nimport { Yieldable } from './external/yieldables';\n\nexport function isEventedObject(c) {\n  return (\n    c &&\n    ((typeof c.one === 'function' && typeof c.off === 'function') ||\n      (typeof c.on === 'function' && typeof c.off === 'function') ||\n      (typeof c.addEventListener === 'function' &&\n        typeof c.removeEventListener === 'function'))\n  );\n}\n\nexport class EmberYieldable extends Yieldable {\n  _deferable() {\n    return EMBER_ENVIRONMENT.defer();\n  }\n}\n\nclass TimeoutYieldable extends EmberYieldable {\n  constructor(ms) {\n    super();\n    this.ms = ms;\n  }\n\n  onYield(state) {\n    let timerId = later(() => state.next(), this.ms);\n\n    return () => cancel(timerId);\n  }\n}\n\n/**\n *\n * Yielding `timeout(ms)` will pause a task for the duration\n * of time passed in, in milliseconds.\n *\n * This timeout will be scheduled on the Ember runloop, which\n * means that test helpers will wait for it to complete before\n * continuing with the test. See `rawTimeout()` if you need\n * different behavior.\n *\n * The task below, when performed, will print a message to the\n * console every second.\n *\n * ```js\n * export default class MyComponent extends Component {\n *   &#64;task *myTask() {\n *     while (true) {\n *       console.log(\"Hello!\");\n *       yield timeout(1000);\n *     }\n *   }\n * }\n * ```\n *\n * @param {number} ms - the amount of time to sleep before resuming\n *   the task, in milliseconds\n */\nexport function timeout(ms) {\n  return new TimeoutYieldable(ms);\n}\n\nexport function deprecatePrivateModule(moduleName) {\n  // eslint-disable-next-line no-console\n  console.warn(\n    `an Ember addon is importing a private ember-concurrency module '${moduleName}' that has moved`,\n  );\n}\n"],"names":["isEventedObject","c","one","off","on","addEventListener","removeEventListener","EmberYieldable","Yieldable","_deferable","EMBER_ENVIRONMENT","defer","TimeoutYieldable","constructor","ms","onYield","state","timerId","later","next","cancel","timeout","deprecatePrivateModule","moduleName","console","warn"],"mappings":";;;;AAIO,SAASA,eAAeA,CAACC,CAAC,EAAE;AACjC,EAAA,OACEA,CAAC,KACC,OAAOA,CAAC,CAACC,GAAG,KAAK,UAAU,IAAI,OAAOD,CAAC,CAACE,GAAG,KAAK,UAAU,IACzD,OAAOF,CAAC,CAACG,EAAE,KAAK,UAAU,IAAI,OAAOH,CAAC,CAACE,GAAG,KAAK,UAAW,IAC1D,OAAOF,CAAC,CAACI,gBAAgB,KAAK,UAAU,IACvC,OAAOJ,CAAC,CAACK,mBAAmB,KAAK,UAAW,CAAC,CAAA;AAErD,CAAA;AAEO,MAAMC,cAAc,SAASC,SAAS,CAAC;AAC5CC,EAAAA,UAAUA,GAAG;AACX,IAAA,OAAOC,iBAAiB,CAACC,KAAK,EAAE,CAAA;AAClC,GAAA;AACF,CAAA;AAEA,MAAMC,gBAAgB,SAASL,cAAc,CAAC;EAC5CM,WAAWA,CAACC,EAAE,EAAE;AACd,IAAA,KAAK,EAAE,CAAA;IACP,IAAI,CAACA,EAAE,GAAGA,EAAE,CAAA;AACd,GAAA;EAEAC,OAAOA,CAACC,KAAK,EAAE;AACb,IAAA,IAAIC,OAAO,GAAGC,KAAK,CAAC,MAAMF,KAAK,CAACG,IAAI,EAAE,EAAE,IAAI,CAACL,EAAE,CAAC,CAAA;AAEhD,IAAA,OAAO,MAAMM,MAAM,CAACH,OAAO,CAAC,CAAA;AAC9B,GAAA;AACF,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASI,OAAOA,CAACP,EAAE,EAAE;AAC1B,EAAA,OAAO,IAAIF,gBAAgB,CAACE,EAAE,CAAC,CAAA;AACjC,CAAA;AAEO,SAASQ,sBAAsBA,CAACC,UAAU,EAAE;AACjD;AACAC,EAAAA,OAAO,CAACC,IAAI,CACT,CAAkEF,gEAAAA,EAAAA,UAAW,kBAChF,CAAC,CAAA;AACH;;;;"}