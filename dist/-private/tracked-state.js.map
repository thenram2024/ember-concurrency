{"version":3,"file":"tracked-state.js","sources":["../../src/-private/tracked-state.js"],"sourcesContent":["import { tracked } from '@glimmer/tracking';\nimport { DEFAULT_STATE as INITIAL_TASK_STATE } from './external/task/default-state';\nimport { INITIAL_STATE as INITIAL_INSTANCE_STATE } from './external/task-instance/initial-state';\n\nfunction trackMixin(proto, obj, key) {\n  const propDesc = Object.getOwnPropertyDescriptor(proto, key);\n  propDesc.initializer = propDesc.initializer || (() => proto[key]);\n  delete propDesc.value;\n  const desc = tracked(obj, key, propDesc);\n  obj[key] = desc;\n  return obj;\n}\n\nfunction applyTracked(proto, initial) {\n  return Object.keys(proto).reduce((acc, key) => {\n    return trackMixin(proto, acc, key);\n  }, initial);\n}\n\nexport let TRACKED_INITIAL_TASK_STATE;\nexport let TRACKED_INITIAL_INSTANCE_STATE;\n\nTRACKED_INITIAL_TASK_STATE = applyTracked(INITIAL_TASK_STATE, {});\nTRACKED_INITIAL_TASK_STATE = applyTracked(\n  {\n    numRunning: 0,\n    numQueued: 0,\n    isRunning: false,\n    isQueued: false,\n    isIdle: true,\n    state: 'idle',\n  },\n  TRACKED_INITIAL_TASK_STATE,\n);\n\nTRACKED_INITIAL_INSTANCE_STATE = applyTracked(INITIAL_INSTANCE_STATE, {});\nTRACKED_INITIAL_INSTANCE_STATE = applyTracked(\n  {\n    state: 'waiting',\n    isDropped: false,\n    isRunning: false,\n  },\n  TRACKED_INITIAL_INSTANCE_STATE,\n);\n\nObject.freeze(TRACKED_INITIAL_TASK_STATE);\nObject.freeze(TRACKED_INITIAL_INSTANCE_STATE);\n"],"names":["trackMixin","proto","obj","key","propDesc","Object","getOwnPropertyDescriptor","initializer","value","desc","tracked","applyTracked","initial","keys","reduce","acc","TRACKED_INITIAL_TASK_STATE","TRACKED_INITIAL_INSTANCE_STATE","INITIAL_TASK_STATE","numRunning","numQueued","isRunning","isQueued","isIdle","state","INITIAL_INSTANCE_STATE","isDropped","freeze"],"mappings":";;;;AAIA,SAASA,UAAUA,CAACC,KAAK,EAAEC,GAAG,EAAEC,GAAG,EAAE;EACnC,MAAMC,QAAQ,GAAGC,MAAM,CAACC,wBAAwB,CAACL,KAAK,EAAEE,GAAG,CAAC,CAAA;AAC5DC,EAAAA,QAAQ,CAACG,WAAW,GAAGH,QAAQ,CAACG,WAAW,KAAK,MAAMN,KAAK,CAACE,GAAG,CAAC,CAAC,CAAA;EACjE,OAAOC,QAAQ,CAACI,KAAK,CAAA;EACrB,MAAMC,IAAI,GAAGC,OAAO,CAACR,GAAG,EAAEC,GAAG,EAAEC,QAAQ,CAAC,CAAA;AACxCF,EAAAA,GAAG,CAACC,GAAG,CAAC,GAAGM,IAAI,CAAA;AACf,EAAA,OAAOP,GAAG,CAAA;AACZ,CAAA;AAEA,SAASS,YAAYA,CAACV,KAAK,EAAEW,OAAO,EAAE;AACpC,EAAA,OAAOP,MAAM,CAACQ,IAAI,CAACZ,KAAK,CAAC,CAACa,MAAM,CAAC,CAACC,GAAG,EAAEZ,GAAG,KAAK;AAC7C,IAAA,OAAOH,UAAU,CAACC,KAAK,EAAEc,GAAG,EAAEZ,GAAG,CAAC,CAAA;GACnC,EAAES,OAAO,CAAC,CAAA;AACb,CAAA;IAEWI,2BAA0B;IAC1BC,+BAA8B;AAEzCD,0BAA0B,GAAGL,YAAY,CAACO,aAAkB,EAAE,EAAE,CAAC,CAAA;AACjEF,0BAA0B,GAAGL,YAAY,CACvC;AACEQ,EAAAA,UAAU,EAAE,CAAC;AACbC,EAAAA,SAAS,EAAE,CAAC;AACZC,EAAAA,SAAS,EAAE,KAAK;AAChBC,EAAAA,QAAQ,EAAE,KAAK;AACfC,EAAAA,MAAM,EAAE,IAAI;AACZC,EAAAA,KAAK,EAAE,MAAA;AACT,CAAC,EACDR,0BACF,CAAC,CAAA;AAEDC,8BAA8B,GAAGN,YAAY,CAACc,aAAsB,EAAE,EAAE,CAAC,CAAA;AACzER,8BAA8B,GAAGN,YAAY,CAC3C;AACEa,EAAAA,KAAK,EAAE,SAAS;AAChBE,EAAAA,SAAS,EAAE,KAAK;AAChBL,EAAAA,SAAS,EAAE,KAAA;AACb,CAAC,EACDJ,8BACF,CAAC,CAAA;AAEDZ,MAAM,CAACsB,MAAM,CAACX,0BAA0B,CAAC,CAAA;AACzCX,MAAM,CAACsB,MAAM,CAACV,8BAA8B,CAAC;;;;"}