{"version":3,"file":"async-arrow-runtime.js","sources":["../../src/-private/async-arrow-runtime.js"],"sourcesContent":["import { TaskFactory } from './task-factory';\n\n/**\n * This builder function is called by the transpiled code from\n * `task(async () => {})`. See async-arrow-task-transform.js\n *\n * @private\n */\nexport function buildTask(contextFn, options, taskName, bufferPolicyName) {\n  let optionsWithBufferPolicy = options;\n\n  if (bufferPolicyName) {\n    optionsWithBufferPolicy = Object.assign({}, optionsWithBufferPolicy);\n    optionsWithBufferPolicy[bufferPolicyName] = true;\n  }\n\n  const result = contextFn();\n\n  const taskFactory = new TaskFactory(\n    taskName || '<unknown>',\n    result.generator,\n    optionsWithBufferPolicy,\n  );\n  return taskFactory.createTask(result.context);\n}\n"],"names":["buildTask","contextFn","options","taskName","bufferPolicyName","optionsWithBufferPolicy","Object","assign","result","taskFactory","TaskFactory","generator","createTask","context"],"mappings":";;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,SAASA,CAACC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,gBAAgB,EAAE;EACxE,IAAIC,uBAAuB,GAAGH,OAAO,CAAA;AAErC,EAAA,IAAIE,gBAAgB,EAAE;IACpBC,uBAAuB,GAAGC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAEF,uBAAuB,CAAC,CAAA;AACpEA,IAAAA,uBAAuB,CAACD,gBAAgB,CAAC,GAAG,IAAI,CAAA;AAClD,GAAA;AAEA,EAAA,MAAMI,MAAM,GAAGP,SAAS,EAAE,CAAA;AAE1B,EAAA,MAAMQ,WAAW,GAAG,IAAIC,WAAW,CACjCP,QAAQ,IAAI,WAAW,EACvBK,MAAM,CAACG,SAAS,EAChBN,uBACF,CAAC,CAAA;AACD,EAAA,OAAOI,WAAW,CAACG,UAAU,CAACJ,MAAM,CAACK,OAAO,CAAC,CAAA;AAC/C;;;;"}