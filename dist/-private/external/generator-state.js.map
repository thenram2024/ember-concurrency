{"version":3,"file":"generator-state.js","sources":["../../../src/-private/external/generator-state.js"],"sourcesContent":["export class GeneratorStepResult {\n  constructor(value, done, errored) {\n    this.value = value;\n    this.done = done;\n    this.errored = errored;\n  }\n}\n\nexport class GeneratorState {\n  constructor(generatorFactory) {\n    this.done = false;\n    this.generatorFactory = generatorFactory;\n    this.iterator = null;\n  }\n\n  step(resolvedValue, iteratorMethod) {\n    try {\n      let iterator = this.getIterator();\n      let { value, done } = iterator[iteratorMethod](resolvedValue);\n\n      if (done) {\n        return this.finalize(value, false);\n      } else {\n        return new GeneratorStepResult(value, false, false);\n      }\n    } catch (e) {\n      return this.finalize(e, true);\n    }\n  }\n\n  getIterator() {\n    if (!this.iterator && !this.done) {\n      this.iterator = this.generatorFactory();\n    }\n    return this.iterator;\n  }\n\n  finalize(value, errored) {\n    this.done = true;\n    this.iterator = null;\n    return new GeneratorStepResult(value, true, errored);\n  }\n}\n"],"names":["GeneratorStepResult","constructor","value","done","errored","GeneratorState","generatorFactory","iterator","step","resolvedValue","iteratorMethod","getIterator","finalize","e"],"mappings":"AAAO,MAAMA,mBAAmB,CAAC;AAC/BC,EAAAA,WAAWA,CAACC,KAAK,EAAEC,IAAI,EAAEC,OAAO,EAAE;IAChC,IAAI,CAACF,KAAK,GAAGA,KAAK,CAAA;IAClB,IAAI,CAACC,IAAI,GAAGA,IAAI,CAAA;IAChB,IAAI,CAACC,OAAO,GAAGA,OAAO,CAAA;AACxB,GAAA;AACF,CAAA;AAEO,MAAMC,cAAc,CAAC;EAC1BJ,WAAWA,CAACK,gBAAgB,EAAE;IAC5B,IAAI,CAACH,IAAI,GAAG,KAAK,CAAA;IACjB,IAAI,CAACG,gBAAgB,GAAGA,gBAAgB,CAAA;IACxC,IAAI,CAACC,QAAQ,GAAG,IAAI,CAAA;AACtB,GAAA;AAEAC,EAAAA,IAAIA,CAACC,aAAa,EAAEC,cAAc,EAAE;IAClC,IAAI;AACF,MAAA,IAAIH,QAAQ,GAAG,IAAI,CAACI,WAAW,EAAE,CAAA;MACjC,IAAI;QAAET,KAAK;AAAEC,QAAAA,IAAAA;AAAK,OAAC,GAAGI,QAAQ,CAACG,cAAc,CAAC,CAACD,aAAa,CAAC,CAAA;AAE7D,MAAA,IAAIN,IAAI,EAAE;AACR,QAAA,OAAO,IAAI,CAACS,QAAQ,CAACV,KAAK,EAAE,KAAK,CAAC,CAAA;AACpC,OAAC,MAAM;QACL,OAAO,IAAIF,mBAAmB,CAACE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;AACrD,OAAA;KACD,CAAC,OAAOW,CAAC,EAAE;AACV,MAAA,OAAO,IAAI,CAACD,QAAQ,CAACC,CAAC,EAAE,IAAI,CAAC,CAAA;AAC/B,KAAA;AACF,GAAA;AAEAF,EAAAA,WAAWA,GAAG;IACZ,IAAI,CAAC,IAAI,CAACJ,QAAQ,IAAI,CAAC,IAAI,CAACJ,IAAI,EAAE;AAChC,MAAA,IAAI,CAACI,QAAQ,GAAG,IAAI,CAACD,gBAAgB,EAAE,CAAA;AACzC,KAAA;IACA,OAAO,IAAI,CAACC,QAAQ,CAAA;AACtB,GAAA;AAEAK,EAAAA,QAAQA,CAACV,KAAK,EAAEE,OAAO,EAAE;IACvB,IAAI,CAACD,IAAI,GAAG,IAAI,CAAA;IAChB,IAAI,CAACI,QAAQ,GAAG,IAAI,CAAA;IACpB,OAAO,IAAIP,mBAAmB,CAACE,KAAK,EAAE,IAAI,EAAEE,OAAO,CAAC,CAAA;AACtD,GAAA;AACF;;;;"}